<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>å¦ä¸€ä¸ªæˆ‘</title>
    <style>
        /* åªä¿ç•™æ ¸å¿ƒæ ·å¼ï¼Œå‡å°‘å†²çª */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #F2F2F7; padding-bottom: 80px; }
        .add-btn {
            position: fixed; bottom: 28px; right: 24px;
            width: 56px; height: 56px; border-radius: 50%;
            background: #000; color: #fff; font-size: 32px;
            border: none; cursor: pointer;
        }
        /* å¯†ç é” */
        .lock-screen {
            position: fixed; top:0; left:0; right:0; bottom:0;
            background: #F2F2F7; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }
        .password-inputs { display: flex; gap: 16px; margin-top: 20px; }
        .password-input {
            width: 48px; height: 48px; border: 2px solid #ccc;
            border-radius: 8px; text-align: center; font-size: 24px;
        }
        /* å¼¹çª— */
        .modal {
            position: fixed; top:0; left:0; right:0; bottom:0;
            background: rgba(0,0,0,0.5); display: none;
        }
        .modal.show { display: block; }
        .modal-content {
            position: fixed; bottom:0; left:0; right:0;
            background: #fff; border-top-left-radius: 24px;
            border-top-right-radius: 24px;
            padding: 20px;
        }
        /* åˆ†ç±»æ ·å¼ï¼ˆæç®€ï¼‰ */
        .category-grid {
            display: grid; grid-template-columns: repeat(4, 1fr);
            gap: 10px; margin: 20px 0;
        }
        .category-item {
            display: flex; flex-direction: column;
            align-items: center;
        }
        .category-icon {
            width: 40px; height: 40px; background: #f2f2f7;
            border-radius: 8px; display: flex;
            align-items: center; justify-content: center;
            margin-bottom: 5px;
        }
        .category-item.active .category-icon {
            background: #000; color: #fff;
        }
    </style>
</head>
<body>
    <!-- å¯†ç é” -->
    <div class="lock-screen" id="lockScreen">
        <div>è¯·è¾“å…¥å¯†ç ï¼ˆ1234ï¼‰</div>
        <div class="password-inputs">
            <input type="password" class="pwd" maxlength="1" oninput="next(this)">
            <input type="password" class="pwd" maxlength="1" oninput="next(this)">
            <input type="password" class="pwd" maxlength="1" oninput="next(this)">
            <input type="password" class="pwd" maxlength="1" oninput="check()">
        </div>
    </div>

    <!-- ä¸»é¡µé¢ -->
    <div id="main" style="display: none;">
        <h1 style="padding: 20px;">å¦ä¸€ä¸ªæˆ‘</h1>
        <button class="add-btn" onclick="openModal()">+</button>

        <!-- è®°è´¦å¼¹çª— -->
        <div class="modal" id="billModal">
            <div class="modal-content">
                <h2>è®°ä¸€ç¬”</h2>
                <input type="number" id="amount" placeholder="è¾“å…¥é‡‘é¢" style="width:100%; font-size:24px; text-align:center; margin:10px 0;">
                <div style="display:flex; gap:10px; margin:10px 0;">
                    <button onclick="setType('expense')" style="flex:1; padding:8px; background:#000; color:#fff; border:none; border-radius:20px;">æ”¯å‡º</button>
                    <button onclick="setType('income')" style="flex:1; padding:8px; border:1px solid #ccc; border-radius:20px;">æ”¶å…¥</button>
                </div>
                <!-- åˆ†ç±»åŒºåŸŸï¼ˆæ ¸å¿ƒï¼‰ -->
                <div>
                    <div>åˆ†ç±»</div>
                    <div class="category-grid" id="categoryGrid">
                        <!-- åˆ†ç±»ä¼šåœ¨è¿™é‡Œç”Ÿæˆ -->
                    </div>
                </div>
                <button onclick="save()" style="width:100%; padding:10px; background:#000; color:#fff; border:none; border-radius:10px; margin-top:10px;">ä¿å­˜</button>
                <button onclick="closeModal()" style="width:100%; padding:10px; margin-top:10px; border:none; background:#eee; border-radius:10px;">å…³é—­</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let pwd = '1234';
        let currentType = 'expense';
        let selectedCate = '';
        // åˆ†ç±»åˆ—è¡¨ï¼ˆæç®€ï¼‰
        const cates = ['é¤é¥®ğŸœ','äº¤é€šğŸšŒ','å¨±ä¹ğŸ¬','å­¦ä¹ ğŸ“š','è´­ç‰©ğŸ›ï¸','æˆ¿ç§ŸğŸ ','å·¥èµ„ğŸ’¼','å…¶ä»–ğŸ”§'];

        // å¯†ç ç›¸å…³
        function next(input) {
            const inputs = document.querySelectorAll('.pwd');
            const idx = Array.from(inputs).indexOf(input);
            if(input.value && idx < 3) inputs[idx+1].focus();
        }
        function check() {
            const inputs = document.querySelectorAll('.pwd');
            const val = Array.from(inputs).map(i=>i.value).join('');
            if(val === pwd) {
                document.getElementById('lockScreen').style.display = 'none';
                document.getElementById('main').style.display = 'block';
            } else {
                alert('å¯†ç é”™ï¼');
                inputs.forEach(i=>i.value='');
                inputs[0].focus();
            }
        }

        // å¼¹çª—+åˆ†ç±»æ ¸å¿ƒ
        function openModal() {
            // æ‰“å¼€å¼¹çª—æ—¶å¼ºåˆ¶æ¸²æŸ“åˆ†ç±»
            renderCates();
            document.getElementById('billModal').classList.add('show');
        }
        function closeModal() {
            document.getElementById('billModal').classList.remove('show');
            document.getElementById('amount').value = '';
        }
        // æ¸²æŸ“åˆ†ç±»ï¼ˆæç®€ç‰ˆï¼Œç¡®ä¿èƒ½æ˜¾ç¤ºï¼‰
        function renderCates() {
            const grid = document.getElementById('categoryGrid');
            grid.innerHTML = ''; // æ¸…ç©º
            // å¾ªç¯ç”Ÿæˆåˆ†ç±»
            cates.forEach(cate => {
                const item = document.createElement('div');
                item.className = 'category-item';
                // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ª
                if(cate === cates[0]) item.classList.add('active');
                // åˆ†ç±»å†…å®¹
                item.innerHTML = `<div class="category-icon">${cate}</div>`;
                // ç‚¹å‡»é€‰ä¸­
                item.onclick = function() {
                    document.querySelectorAll('.category-item').forEach(i=>i.classList.remove('active'));
                    this.classList.add('active');
                    selectedCate = cate;
                };
                grid.appendChild(item);
            });
            // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªåˆ†ç±»
            selectedCate = cates[0];
        }

        // æ”¶æ”¯ç±»å‹
        function setType(type) {
            currentType = type;
        }

        // ä¿å­˜
        function save() {
            const amount = document.getElementById('amount').value;
            if(!amount || amount <=0) {
                alert('é‡‘é¢è¦å¤§äº0ï¼');
                return;
            }
            alert(`æˆåŠŸï¼š${currentType==='expense'?'æ”¯å‡º':'æ”¶å…¥'}${amount}å…ƒï¼ˆ${selectedCate}ï¼‰`);
            closeModal();
        }
    </script>
</body>
</html>
